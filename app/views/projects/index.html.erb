<% if user_signed_in? == false %>
  <div class="banner-index">
    <div class="banner-text">
      <h3>Explore other hackers' projects.</h3>
      <h3 style="margin-bottom: 28px;">Share your own.</h3>
      <%= link_to "User.new",new_user_registration_path, class: "btn-signup"  %>
    </div>
  </div>
<% end %>

<!-- Nav tabs -->
<div class="d-flex flex-row justify-content-center" id="myTab" role="tablist">
  <div>
    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all" role="tab" aria-controls="all" aria-selected="true">all</a>
      </li>
      <% ActsAsTaggableOn::Tag.most_used(5).each do |t| %>
      <li class="nav-item">
        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#<%= t.name %>" role="tab" aria-controls="profile" aria-selected="false"><%= t.name %></a>
      </li>
      <% end %>
      <li class="nav-item">
        <a class="nav-link" id="profile-tab" data-toggle="tab" href="" role="tab" aria-controls="profile" aria-selected="false">...</a>
      </li>
    </ul>
  </div>
  <div>
    <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#hackerDayMapModal">Find Hackers Nearby</button>
  </div>
</div>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="all" role="tabpanel" aria-labelledby="all-tab">
    <div class="container">
      <div class="row">
        <% @projects.each do |project| %>
          <div class="col-lg-4 col-md-6 col-sm-12">
            <%= link_to project_path(project) do %>
              <div class="card">
                <div class="card-img-container">
                  <%= cl_image_tag project.cover_photo, alt: "image", class: "card-img-top" %>
                  <div class="overlay">
                    <div class="hover-text">
                      <p class="project-text"><%= project.type %></p>
                      <p class="project-text"><%= project.description %></p>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <div class="card-content-header">
                    <h6><%= project.name %></h6>
                    <div class="avatar-list">
                      <% project.collaborations.map do |collaboration| %>
                        <%= link_to user_path(collaboration.user) do %>
                          <img src="<%= collaboration.user.profile_avatar_url %>" class="avatar-small" data-toggle="tooltip" data-placement="top" title="<%= collaboration.user.username %>">
                        <% end %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <% ActsAsTaggableOn::Tag.most_used(5).each do |t| %>
    <div class="tab-pane" id="<%= t.name %>" role="tabpanel" aria-labelledby="<%= t.name %>-tab">
      <div class="container">
        <div class="row">
          <% @projects.tagged_with(t).each do |project| %>
            <div class="col-lg-4 col-md-6 col-sm-12">
              <%= link_to project_path(project) do %>
                <div class="card">
                  <%= cl_image_tag project.cover_photo, alt: "image", class: "card-img-top" %>
                  <div class="card-body">
                    <div class="card-content-header">
                      <h6><%= project.name %></h6>
                      <div class="avatar-list">
                        <% project.collaborations.map do |collaboration| %>
                          <%= link_to user_path(collaboration.user) do %>
                            <img src="<%= collaboration.user.profile_avatar_url %>" class="avatar-small" data-toggle="tooltip" data-placement="top" title="<%= collaboration.user.username %>">
                          <% end %>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="text-center">

</div>



<!-- Map Modal -->

<div class="modal fade bd-example-modal-lg" id="hackerDayMapModal" tabindex="-1" role="dialog" aria-labelledby="hackerDayMapModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-container">
        <div class="modal-header">
          <h5 class="modal-title" id="hackerDayMapModalLabel">Upcoming HackSessions Nearby</h5>
        </div>
        <div class="modal-body">
            <div
            id="map"
            style="width: 100%;
            height: 400px;"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
            ></div>
        </div>
      </div>
    </div>
  </div>
</div>



